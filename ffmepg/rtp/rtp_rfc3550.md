# RTP 学习

- [RTP 学习](#rtp-学习)
  - [术语](#术语)
  - [介绍](#介绍)
  - [RTP 使用场景](#rtp-使用场景)
  - [字节序、对齐和时间格式](#字节序对齐和时间格式)
  - [RTP 数据传输协议](#rtp-数据传输协议)
    - [RTP 固定头域](#rtp-固定头域)
      - [timestamp](#timestamp)
      - [SSRC](#ssrc)
      - [CSRC list](#csrc-list)
    - [多路复用 RTP 会话](#多路复用-rtp-会话)
  - [RTCP](#rtcp)
    - [RTCP 包格式](#rtcp-包格式)
    - [RTCP 包发送和接收规则](#rtcp-包发送和接收规则)
    - [发送者和接收者报告](#发送者和接收者报告)
      - [SR RTCP 包](#sr-rtcp-包)
      - [RR RTCP 包](#rr-rtcp-包)
      - [SDES](#sdes)
      - [BYE](#bye)
  - [参考](#参考)

## 术语

```txt
RTP
  real-time transport protocol, 实时传输协议。
RTCP
  RTP control protocol, RTP 控制协议。
RTP payload
  RTP 传输的一包数据，比如音频采样或压缩的视频数据。
RTP packet
  一个数据包包含混合的 RTP 头，一个可能为空的源列表，以及载荷数据。
RTCP packet
  一个控制包包含混合的类似 RTP 数据包的头，之后是取决于 RTCP 包类型的结构化元素。
RTP session
  使用 RTP 通讯的一组参与者的联系。一个参与者可同时参与多个 RTP 会话。在一个多媒体会话中，每个媒介通常有自己单独的 RTP 会话和 RTCP 包，除非编码自身复用多个媒体到一个单独的数据流。一个参与者通过不同会话的接收使用不同的目的传输地址区分不同的 RTP 会话，每个传输地址对包含一个网络地址和一个 RTP/RTCP 端口对。一个 RTP 会话中的所有参与者在 IP 组播时可以共享一个目的传输地址对；在单独的单播地址和传输端口对时，每个参与者的目的传输地址对可能是不一样的。在单播时，一个参与者可以使用相同的端口对接收来自会话中的其他参与者，也可以为每个参与者设置不一样的端口对。
  RTP 会话的一个重要特点是每个 RTP 会话维护一个完全的、单独的 SSRC 标识符。在一个 RTP 会话中的参与者集合包含了可以接收 SSRC 标识符的参与者，这个 SSRC 标识符可以通过任何一个参与者在 RTP 的 SSRC 或 CSRC 或 RTCP 传输。
SSRC
  synchronization source, 同步源。RTP 包的流的源，是一个 32 位的数字 SSRC 标识，通过 RTP 头域携带，从而不依赖网络地址。来自一个同步源的所有包组成同一时间和序列号空间，因此一个接收者通过同步源组装包进行回放。SSRC 在一个 RTP 会话中是一个全局唯一的随机值。一个参与者在一个多媒体会话中不需要为所有的 RTP 会话使用相同的 SSRC；通过 RTCP 提供绑定 SSRC。如果一个参与者在一个 RTP 会话中生成多个流，每个流必须有不同的 SSRC。
CSRC
  contributing source, 信源。贡献给组合流的 RTP 包的流的源，组合流由一个 RTP 混合器生成。混合器混合器在一个包的头域中插入源的 SSRC 的列表，这些源参与组成这个特殊的包。这个列表称作 CSRC 列表。
End system
  终端。一个应用生成要发送的 RTP 包和/或使用收到的 RTP 包。一个终端系统可以在一个 RTP 会话中作为一个或多个同步源，不过一般是一个源。
Mixer
  混合器。一个中间系统接收来自一个或多个源的 RTP 包，可能修改数据合适，以某种方式组装包然后以一个新的 RTP 包转发。因为多个输入源之间的时间一般不会同步，混合器会调整流之间的时间，并生成组合流自己的时间。因此，来自一个混合器的所有数据包会将混合器作为同步源。
Monitor
  监视器。一个应用接收一个 RTP 会话参与者发送的 RTCP 包，一般是接收报告，并且估算服务的当前质量，包括监控分发、诊断错误和长期统计。
NTP
  network time protocol, 网络时间协议。
CNAME
  canonical name, 规范名/别名。
```

## 介绍

RTP 提供端到端的实时数据分发服务。这些服务包括载荷类型标识符、序列号、时间戳和分发监控。

应用通常在 UDP 上运行 RTP，利用 RTP 的多路复用和校验和服务。但是 RTP 也可以用于其他底层网络或传输协议。如果底层网络提供多播，RTP 支持将数据传输到多个目的地。

**注意**：RTP 本身不提供任何机制保证及时分发或其他服务的质量性保证，而是依赖底层服务实现这些。RTP 不保证分发和避免分发乱序，也不会假定底层网卡是可靠的且顺序分发包。RTP 包含的序列号支持接收者重新组织发送者发送的包顺序，但是也可使用序列号确定一个包的合适位置，比如在视频解码时不需要按序解码包。

RTP 包含两个紧密相关的部分：

- RTP：携带具有实时属性的数据
- RTCP：监控服务的质量，并在一个持续性会话中传输参与者的信息。

RTP 是一个不完整的协议框架。通过修改和/或增加所需的头域定制 RTP。对于一个专门的应用的完整的 RTP 规格文档，除了此文档，还需要一个或多个其他文档：

- 概述规格文档：定义一系列的载荷类型编码和对应的载荷格式。
- 载荷格式规格文档：定义如何通过 RTP 携带一个专门的载荷，比如一个音频或视频编码

## RTP 使用场景

- 简单的多方语音会议
- 音视频会议：音频和视频经过单独的 RTP 会话。在 RTP 层，音频和视频会话没有直接的连接，但是一个用户可在两个会话的 RTCP 包使用相同的规范名称，以便会话可以被联系起来

## 字节序、对齐和时间格式

所有整数域是大端序(big-endian)。除非特别说明，数字常数是 10 进制的。

所有头域数据对齐到自然长度。填充字节是 0。

挂钟(wallclock)时间(绝对的日期和时间)使用 NTP 的时间戳格式，即相对于 UTC 1900-1-1 的秒数。完整精度的 NTP 时间戳是一个 64 位的无符号定点数，前 32 位是整数，后 32 是小数。在一些领域小型的表示更合适，只需要中间 32 位；即整数的低 16 位和小数的高 16 位。整数的高 16 位需要单独确定。

使用 RTP 运行 NTP 不需要单独实现，可以使用其他时间源或者不使用。但是，运行 NTP 在同步来自不同主机的流时比较有用。

NTP 时间戳在 2036 年某个时刻会包成 0，但是对于 RTP 来说，只需要使用 NTP 时间戳对的差值。因此只要时间戳对的差值估计在 68 年以内，使用取模做减法和比较可以避免这种影响。

## RTP 数据传输协议

### RTP 固定头域

```txt
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|V=2|P|X|  CC   |M|     PT      |       sequence number         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           timestamp                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           synchronization source (SSRC) identifier            |
+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
|            contributing source (CSRC) identifiers             |
|                             ....                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

RTP 包的前 12 个字节是固定出现的，CSRC 列表只有在混合器插入时出现。

- V, version: 版本号，2 位。
- P, padding: 填充，1 位。如果为 1，表示 RTP 包末尾包含一个或多个填充字节，这不是载荷的一部分。填充区域的最后一个字节包表示应当被忽略的填充字节数，包括最后一个字节本身。一些有固定块大小的加密算法或者在底层协议数据单元携带锁哥 RTP 包时可能需要填充。
- X, extension: 扩展，1 位。如果为 1，固定头域之后必须跟一个头的扩展域。
- CC, CSRC count: CSRC 计数器，表示跟在固定头域后的 CSRC 数目。
- M, marker: 标记，1 位。其解释在概述文档中定义。本来是支持重要的事件，比如流的包的帧边界。一个概述可能定义其它的标记位，或通过改变载荷类型域的比特数指定没有标记位。
- PT payload type: 7 位。标识 RTP 载荷类型的格式，并且由应用确定它的含义。一个 RTP 源在会话中可能修改载荷类型，但是这个域不应用作复用单独的媒体流。接收者必须忽视不理解载荷类型的包。
- sequence number: 序列号，16 位。RTP 数据包发送一次序列号加 1，接收者可能用来检测包丢失和恢复包顺序。序列号的初始值应该是随机的(不可预测的)，以便使得不易对加密的已知明文攻击。

#### timestamp

时间戳，32 位。时间戳反映了 RTP 数据包的第一个字节的采样时间。采样时间必须来自一个单调底线性增加的时钟以便同步和抖动计算。时钟精度必须达到同步的精度密切用于计算包到达的抖动(一个视频帧一次一般是不够的)。时钟频率取决于携带的数据载荷，在概述或载荷格规格文档中静态指定，或通过非 RTP 方式动态定义。如果周期性生成 RTP 包，就使用采样使用确定的采样时间，而不是读取的系统时间。比如对于一个固定频率的音频，时间戳在每个采样周期加 1.如果一个音频应用从输入设备读取时阻塞了 160 个采样间隔，那么时间戳要为这个块增加 160，无论是否在包中传输这个块还是丢掉。

时间戳的初始值应该是随机的，类似于序列号。一些连续的 RTP 如果(逻辑上)一起生成，就有相同的时间戳，比如属于同一个视频帧。如果数据不是按照采样的顺序发送，连续的 RTP 包可能包含的时间戳不单调，比如 MPEG 插入的视频帧。(传输的包的序列号仍然是单调的。)

不同媒体流的 RTP 时间戳可能按照不同的速度增减，且通常有独立随机的偏差。因此，虽然这些时间戳足够用于重建一个流的时间，直接比较不同媒体的 RTP 时间戳在同步时并不高效。相反地，对于每个媒体，通过将采样时间和一个来自参考时钟(wallclock)的时间戳搭配将 RTP 的时间戳和采样时间关联，参考时钟表示对应该 RTP 时间戳的数据采样的时间。所有媒体共享参考时钟以便同步。时间戳对不会在每个数据包传输，不是在 RTCP SR 包中低频传输。

采样时间是 RTP 时间戳的参考点，因为对于传输终端是已知的，且对于所有媒体的定义相同，和编码延迟或其他处理无关。目的是支持同步在同一时间采样的所有媒体演示。

应用传输存储的数据而不是实时采样的数据，一般使用来自一个 wallclock 时间的虚拟的演示时间线确定什么时候发送下一个要演示的帧或者其他媒体单元。在这种情况下，RTP 时间戳应该反映每个单元的演示时间。即每个单元的 RTP 时间戳应该关联虚拟演实线上应该出现的媒体单元的 wallclock 时间。实际演示由接收者决定，可能会晚发生。

#### SSRC

32 位。SSRC 标志了同步源。SSRC 应随机生成，且确保在同一个 RTP 会话中不存在两个相同的 SSRC。虽然多个源使用相同 SSRC 的可能性较低，但是所有的 RTP 实现都必须准备检测和解决冲突。如果一个源改变了源传输地址，必须选择一个新的 SSRC 以避免被当做循环的源。

#### CSRC list

0-15 个元素，每个 32 位。CSRC 列表标识 RTP 包载荷相关的信源。CC 头域指定了 CSRC 的数目。如果多于 15 个，只能标识 15 个信源。混合器插入 CSRC 标识符，使用信源的 SSRC。

### 多路复用 RTP 会话

在集成层处理设计原则中描述到，对于高效的协议处理，多路复用点应该最小化。在 RTP 中，多路复用由目的传输地址(网络地址和端口)提供，这个传输地址对于每个 RTP 会话都不同。比如，在一个包含音频和视频单独编码的电话会议中，每个媒体应该在单独的 RTP 会话中携带，且有自己单独的目的传输地址。

单独的音频和视频流不应在一个 RTP 会话中携带，且基于载荷类型或 SSRC 域进行解复用。RTP 媒体类型不同但是 SSRC 相同的交织的包(interleaving packets)会产生下面的问题：

- 假定两个音频流共享相同的 RTP 会话和相同的 SSRC，并且其中一个想要修改编码，因此需要一个不同的 RTP 载荷类型，将没有通用的方式识别哪个流改变了编码。
- 一个 SSRC 定义用于识别一个单独的时间和序列号空间。如果媒体时钟频率不同，那么交织的多个载荷类型需要不同的时间空间和序列号空间，来识别哪个载荷类型有丢包。
- RTCP 发送者和接收者报告对于每个 SSRC 只能描述一个时间和序列号空间，且不携带载荷类型域。
- 一个 RTP 混合器不能将不兼容的媒体的交织流组合成一个流。
- 在一个 RTP 会话中携带多个媒体排除了：如果合适可使用不同的网络路径或网络资源分配；如果需要接收媒体的一个子集，比如当视频超过可承受的带宽时只接收音频；接收端单独处理不同的媒体。但是使用单独的 RTP 会话支持单个或多个处理的实现。

每个媒体使用不同的 SSRC 但是在一个 RTP 会话中发送能避免前三个问题，但是不能避免最后一个问题。

另一方便，在一个 RTP 会话中多路复用多个相关的相同媒体源，使用不同的 SSRC 是组播会话的规范。

## RTCP

RTCP 基于周期性地发送控制包给会话的所有参与者，使用相同的分发机制作为数据包。底层协议必须支持数据和控制包的多路复用，比如使用单独的 UDP 端口。RTCP 有 4 个功能：

- 主要功能是提供对数据发送的质量反馈。这是 RTP 作为一种传输协议角色不可分割的一部分，并且和其他传输协议的流拥塞控制相关。反馈可直接用于控制适应性编码，但是 IP 组播实现显示获取来自接收者的反馈以便诊断分发中的错误是重要的。发送接收返回报告给所有参与者允许观察问题的人评估问题是局部的还是全局的。类似 IP 组播的分发机制，RTCP 也使得一个实体，比如网络服务供应商，虽然不在会话中，但可以接受反馈信息并且作为第三方监控者诊断网络问题。RTCP 的发送者和接收者报告实现了这个反馈功能。
- RTCP 为一个 RTP 源携带了持续了传输层标识符，即 CNAME。因为发现冲突或程序重启时 SSRC 会改变，接收者依靠 CNAME 跟踪每个参与者。接收者也可依靠 CNAME 在一个相关的 RTP 会话集合中关联一个给定参与者的多个数据流，比如用于同步音频和视频。媒体间同步也依赖数据发送者的 RTCP 包中的 NTP 和 RTP 时间戳。
- 前两个功能要求所有参与者发送 RTCP 包，因此必须控制速率以便 RTP 扩展到更大规模的参与者。通过使每个参与者发送它自己的控制包到所有其他参与者，每个参与者可以单独观察参与者的数量。这个数字用于计算发送包的频率。
- 第四个可选的功能是传输少量的会话控制信息，比如在用户界面展示的参与者标识符。这在宽松控制会话比较有用，参与者加入和退出没有成员控制或参数协商。RTCP 作为一个方便到达所有参与者的通道，但是不必期待支持一个应用的所有控制通讯需求。

前三个功能应该用于所有环境，但是一般用于 IP 组播环境。RTP 应用设计者应该避免只能工作于单播模式且不能扩展到大规模的机制。

### RTCP 包格式

一些类型的 RTCP 包协议一些控制信息：

- SR sender report: 来自活跃发送的参与者用于传输和接收统计。
- RR receiver report: 来自不活跃发送的参与者用于接收统计。
- SDES source description items: 源描述信息，包括 CNAME。
- BYE: 表示参与结束。
- APP: 应用相关的功能。

### RTCP 包发送和接收规则

一个会话参与者必须维护一些状态：

- tp: 上一次发送 RTCP 包的时间。
- tc: 当前时间。
- tn: 发送下一个 RTCP 包的计划时间。
- pmembers: 上次计算 tn 时预估的会话成员数。
- members: 最近的对会话成员数的估算。
- senders: 最近的对会话发送者数的估算。
- rtcp_bw: 目的 RTCP 带宽，比如，会话的所有成员的 RTCP 包使用的总带宽，单位是每秒的字节数。
- we_sent: 如果应用在倒数第二个 RTCP 报告之后传输了数据则为 true。
- avg_rtcp_size: 复合 RTCP 包的平均大小，单位是字节，包括该参与者发送和接收的所有 RTCP 包。大小包含了底层传输和网络协议头。
- initial: 如果一个应用还没有发送过 RTCP 包则为 true。

### 发送者和接收者报告

RTP 接收者使用 RTCP 报告提供接收质量反馈，RTCP 报告有两种形式，取决于接收者是否也是发送者，接收者报告(sender report, SR) 和接收者报告 (receiver report, RR) 除了包类型编号，唯一的区别是 SR 包含一个 20 字节的发送者信息域，活跃的发送者会使用这个域。如果一个站点在发送上一个或者倒数第二个之后的间隔发送了任意数据包，会发送 SR，否则发送 RR。

SR 和 RR 格式都包含 0 或多个接收者报告块，对应了上次报告之后接收到 RTP 数据包的所有同步源。不会给 CSRC 列表对应的信源发送报告。每个接收报告块提供了对收到对应同步源的数据的统计。因为一个 SR 或 RR 包最多可包含 31 个接收报告块，其他的 RR 包应该放入栈中。

#### SR RTCP 包

```txt
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
header |V=2|P|    RC   |   PT=SR=200   |             length            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         SSRC of sender                        |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
sender |              NTP timestamp, most significant word             |
info   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |             NTP timestamp, least significant word             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         RTP timestamp                         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                     sender's packet count                     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                      sender's octet count                     |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
report |                 SSRC_1 (SSRC of first source)                 |
block  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  1    | fraction lost |       cumulative number of packets lost       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           extended highest sequence number received           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                      interarrival jitter                      |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         last SR (LSR)                         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   delay since last SR (DLSR)                  |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
report |                 SSRC_2 (SSRC of second source)                |
block  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  2    :                               ...                             :
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
       |                  profile-specific extensions                  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

第一部分是头域，8 字节长：

- RC reception report count: 5 位。此包包含的接收报告块数目。有效值是 0。
- PT packet type: 8 位。200 表示是一个 RTCP SR 包。
- length: RTCP 包长度减 1，长度是 32-bit，包含头和填充。减 1 使得 0 也是有效长度，从而避免可能对复合 RTCP 包进行循环扫描。
- SSRC: 32 位。这个 SR 包发起者的同步源。

第二部分是发送者信息，20 字节长，且出现在每个 SR 包中。它概括了这个发送者的数据传输：

- NTP timestamp: 64 位。表示发送此包的 wallclock 时间，以便和其他接收者发送的 RR 返回的时间戳结合，计算往返传播。接收者应预计这个时间戳的测量精确度可能受限于 NTP 时间戳的精度。
- RTP timestamp: 32 位。对应上述相同的 NTP 时间戳，但是和数据包中的 RTP  时间戳的单元和随机偏差相同。NTP 时间戳已经同步的源可借此在媒体内或媒体间同步，媒体无关的接收者也可借此估算 RTP 时钟频率。**注意**：大多数情况下，这个时间戳不会等于临近的数据包的 RTP 时间戳。相反地，必须使用 RTP 时间戳计数器和真实时间的关系从对应的 NTP 时间戳计算值，并且按照采样时间周围性地检查 wallclock 时间以维护值。
- sender's packet count: 32  位。从开始传输截止到生成此 SR 包，发送者一共发送的 RTP 数据包数目。如果发送者修改了 SSRC 应该重设这个计数器。
- sender's octet count: 32 位。从开始传输截止到生成此 SR 包，发送者一共发送的 RTP 数据包载荷的字节数。如果发送者修改了 SSRC 应该重设这个计数器。这个只可用于估算平均的数据载荷。

第三部分包含 0 或多个 RR 块。

#### RR RTCP 包

```txt
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
header |V=2|P|    RC   |   PT=RR=201   |             length            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                     SSRC of packet sender                     |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
report |                 SSRC_1 (SSRC of first source)                 |
block  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  1    | fraction lost |       cumulative number of packets lost       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           extended highest sequence number received           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                      interarrival jitter                      |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         last SR (LSR)                         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   delay since last SR (DLSR)                  |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
report |                 SSRC_2 (SSRC of second source)                |
block  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  2    :                               ...                             :
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
       |                  profile-specific extensions                  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

类比 SR。

#### SDES

```txt
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
header |V=2|P|    SC   |  PT=SDES=202  |             length            |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
chunk  |                          SSRC/CSRC_1                          |
  1    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                           SDES items                          |
       |                              ...                              |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
chunk  |                          SSRC/CSRC_2                          |
  2    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                           SDES items                          |
       |                              ...                              |
       +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
```

#### BYE

```txt
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|    SC   |   PT=BYE=203  |             length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           SSRC/CSRC                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      :                              ...                              :
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
(opt) |     length    |               reason for leaving            ...
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

## 参考

- [rfc 3550-RTP: A Transport Protocol for Real-Time Applications](https://tools.ietf.org/html/rfc3550)
